#!/bin/bash

INIFILES_BASE_DIR="sources/inifiles"

#TODO: use experiment_type based on the information in inifiles !

usage() {
    echo
    echo 'Usage: 'run_experiments' <exp_ID> <first_experiment> [last_experiment]'
    echo
    echo '    exp_ID: experiment_ID - a unique identifier of experiment series'
    echo
    echo '    first_experiment: number of first experiment in exp_ID series of'
    echo '             experiments'
    echo '    last_experiment: if specified, computes all experiments between'
    echo '             the first_experiment and last_experiment (included);'
    echo '             if not specified, computes only first_experiment'
    echo 

    exit 0
}

if [ -z "$1" ]; then
    usage
fi

EXP_ID="$1"

first_experiment=$2
if [ -z "$3" ]; then
    last_experiment=$first_experiment
else
    last_experiment=$3
fi

run_experiments() {
    echo
    echo ---------------------------------------------------------
    echo GENERAL experiments informations
    echo
    echo First experiment: $first_ini_number
    echo Last experiment:  $last_ini_number

    ini_dir="${INIFILES_BASE_DIR}/${EXP_ID}"


    for (( i=${first_experiment}; i<=${last_experiment}; i++ ))
    do
	echo
	echo =============================================================
	echo Executing $EXP_ID problem.
	echo Experiment ${i}:
	
	filename="${ini_dir}/experiment_${i}.ini"
	python inverse_saturated.py -i "$filename"

	echo
	echo Experiment ${i}: finished.
    done
}

run_experiments